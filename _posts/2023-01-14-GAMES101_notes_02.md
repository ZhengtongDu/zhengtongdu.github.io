---
layout: post
title: GAMES101_notes_02
date: 2023-01-14 23:44 +0800
tags: ["Learning Notes", "GAMES101"]
toc: true
---

> GAMES101: 现代计算机图形学入门
>
> 笔记02：Shading,

## Lesson 07 Shading 1(Illumination, Shading and Graphics Pipeline)

本讲内容：

- Visibility/ occlusion
  - Z-buffering
- Shading
  - Illumination & Shading
  - Graphics Pipeline

### Visbility 可见性

#### Painter's Algorithm

受油画绘画技术的启发，作画时应当先画远处的物体，再画近处的物体，从而保证物体遮挡的结果是正确的

问题是如何判断哪个物体远，哪个物体近？相同远近的物体，绘画顺序怎么样确定？

需要首先对三角形进行排序，需要$O(n\log n)$的时间，但是不能完全解决问题

### Z-buffer 深度缓存

用于解决上述提到的问题

Idea:

- Store curent min. z-value __for each sample(pixel)__
- Needs an additional buffer for depth values
  - frame buffer stores color values
  - depth buffer (z-buffer) stores depth

Important: For simplicity we suppose $z$ is always positive(smaller $z$ -> closer, larger $z$ -> further)

#### 算法流程

- Initialize depth buffer to $\infty$
- During rasterization:

```c++
    for(each triangle T)
        for(each sample(x, y, z) in T)
            if(z < zbuffer[x, y])           // closest sample so far
                framebuffer[x, y] = rgb;    // update color
                zbuffer[x, y] = z;          // update depth
            else
                ;                           // do nothing, this sample is occluded
```

（目前只是说明在已知深度的情况下如何处理遮挡关系，还未介绍如何确定物体深度）

